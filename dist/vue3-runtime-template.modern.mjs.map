{"version":3,"file":"vue3-runtime-template.modern.mjs","sources":["../index.js"],"sourcesContent":["import {h} from 'vue';\n\nconst defineDescriptor = (src, dest, name) => {\n  // eslint-disable-next-line no-prototype-builtins\n  if (!dest.hasOwnProperty(name)) {\n    const descriptor = Object.getOwnPropertyDescriptor(src, name);\n    Object.defineProperty(dest, name, descriptor);\n  }\n};\n\nconst merge = (objs) => {\n  const res = {};\n  objs.forEach((obj) => {\n    obj &&\n      Object.getOwnPropertyNames(obj).forEach((name) =>\n        defineDescriptor(obj, res, name),\n      );\n  });\n  return res;\n};\n\nconst buildFromProps = (obj, props) => {\n  const res = {};\n  props.forEach((prop) => defineDescriptor(obj, res, prop));\n  return res;\n};\n\nexport default {\n  props: {\n    template: String,\n    parent: Object,\n    templateProps: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n  render() {\n    if (this.template) {\n      const parent = this.parent || this.$parent;\n      const {\n        $data: parentData = {},\n        $props: parentProps = {},\n        $options: parentOptions = {},\n      } = parent;\n      const {\n        components: parentComponents = {},\n        computed: parentComputed = {},\n        methods: parentMethods = {},\n      } = parentOptions;\n      const {\n        $data = {},\n        $props = {},\n        $options: {methods = {}, computed = {}, components = {}} = {},\n      } = this;\n      const passthrough = {\n        $data: {},\n        $props: {},\n        $options: {},\n        components: {},\n        computed: {},\n        methods: {},\n      };\n\n      // build new objects by removing keys if already exists (e.g. created by mixins)\n      Object.keys(parentData).forEach((e) => {\n        if (typeof $data[e] === 'undefined') {\n          passthrough.$data[e] = parentData[e];\n        }\n      });\n      Object.keys(parentProps).forEach((e) => {\n        if (typeof $props[e] === 'undefined') {\n          passthrough.$props[e] = parentProps[e];\n        }\n      });\n      Object.keys(parentMethods).forEach((e) => {\n        if (typeof methods[e] === 'undefined') {\n          passthrough.methods[e] = parentMethods[e];\n        }\n      });\n      Object.keys(parentComputed).forEach((e) => {\n        if (typeof computed[e] === 'undefined') {\n          passthrough.computed[e] = parentComputed[e];\n        }\n      });\n      Object.keys(parentComponents).forEach((e) => {\n        if (typeof components[e] === 'undefined') {\n          passthrough.components[e] = parentComponents[e];\n        }\n      });\n\n      const methodKeys = Object.keys(passthrough.methods || {});\n      const dataKeys = Object.keys(passthrough.$data || {});\n      const propKeys = Object.keys(passthrough.$props || {});\n      const templatePropKeys = Object.keys(this.templateProps);\n      const allKeys = dataKeys.concat(propKeys).concat(methodKeys).concat(templatePropKeys);\n      const methodsFromProps = buildFromProps(parent, methodKeys);\n      const finalProps = merge([\n        passthrough.$data,\n        passthrough.$props,\n        methodsFromProps,\n        this.templateProps,\n      ]);\n\n      const provide = this.$parent.$.provides ? this.$parent.$.provides : {}; // Avoids Vue warning\n\n      const dynamic = {\n        template: this.template || '<div></div>',\n        props: allKeys,\n        computed: passthrough.computed,\n        components: passthrough.components,\n        provide: provide,\n      };\n      // debugger;\n\n      return h(dynamic, {...finalProps});\n    }\n  },\n};\n"],"names":["defineDescriptor","src","dest","name","hasOwnProperty","descriptor","Object","getOwnPropertyDescriptor","defineProperty","index","props","template","String","parent","templateProps","type","default","render","this","$parent","$data","parentData","$props","parentProps","$options","parentOptions","components","parentComponents","computed","parentComputed","methods","parentMethods","passthrough","keys","forEach","e","methodKeys","dataKeys","propKeys","templatePropKeys","allKeys","concat","methodsFromProps","buildFromProps","obj","res","prop","finalProps","objs","getOwnPropertyNames","merge","h","provide","$","provides","_extends"],"mappings":"4PAEA,MAAMA,EAAmBA,CAACC,EAAKC,EAAMC,KAEnC,IAAKD,EAAKE,eAAeD,GAAO,CAC9B,MAAME,EAAaC,OAAOC,yBAAyBN,EAAKE,GACxDG,OAAOE,eAAeN,EAAMC,EAAME,EACpC,GAoBF,IAAeI,EAAA,CACbC,MAAO,CACLC,SAAUC,OACVC,OAAQP,OACRQ,cAAe,CACbC,KAAMT,OACNU,QAASA,KAAO,CAAE,KAGtBC,SACE,GAAIC,KAAKP,SAAU,CACjB,MAAME,EAASK,KAAKL,QAAUK,KAAKC,SAEjCC,MAAOC,EAAa,GACpBC,OAAQC,EAAc,CAAE,EACxBC,SAAUC,EAAgB,CAAA,GACxBZ,GAEFa,WAAYC,EAAmB,CAAE,EACjCC,SAAUC,EAAiB,CAAA,EAC3BC,QAASC,EAAgB,IACvBN,GACEL,MACJA,EAAQ,CAAA,EAAEE,OACVA,EAAS,CAAE,EACXE,UAAUM,QAACA,EAAU,GAAEF,SAAEA,EAAW,CAAA,EAAEF,WAAEA,EAAa,CAAE,GAAI,CAC7D,GAAIR,KACEc,EAAc,CAClBZ,MAAO,CAAA,EACPE,OAAQ,CAAE,EACVE,SAAU,GACVE,WAAY,CAAA,EACZE,SAAU,CAAE,EACZE,QAAS,CAAA,GAIXxB,OAAO2B,KAAKZ,GAAYa,QAASC,SACP,IAAbf,EAAMe,KACfH,EAAYZ,MAAMe,GAAKd,EAAWc,GACpC,GAEF7B,OAAO2B,KAAKV,GAAaW,QAASC,SACP,IAAdb,EAAOa,KAChBH,EAAYV,OAAOa,GAAKZ,EAAYY,GACtC,GAEF7B,OAAO2B,KAAKF,GAAeG,QAASC,SACR,IAAfL,EAAQK,KACjBH,EAAYF,QAAQK,GAAKJ,EAAcI,GACzC,GAEF7B,OAAO2B,KAAKJ,GAAgBK,QAASC,SACR,IAAhBP,EAASO,KAClBH,EAAYJ,SAASO,GAAKN,EAAeM,GAC3C,GAEF7B,OAAO2B,KAAKN,GAAkBO,QAASC,SACR,IAAlBT,EAAWS,KACpBH,EAAYN,WAAWS,GAAKR,EAAiBQ,GAC/C,GAGF,MAAMC,EAAa9B,OAAO2B,KAAKD,EAAYF,SAAW,CAAA,GAChDO,EAAW/B,OAAO2B,KAAKD,EAAYZ,OAAS,CAAE,GAC9CkB,EAAWhC,OAAO2B,KAAKD,EAAYV,QAAU,CAAA,GAC7CiB,EAAmBjC,OAAO2B,KAAKf,KAAKJ,eACpC0B,EAAUH,EAASI,OAAOH,GAAUG,OAAOL,GAAYK,OAAOF,GAC9DG,EA1EWC,EAACC,EAAKlC,KAC3B,MAAMmC,EAAM,CAAA,EAEZ,OADAnC,EAAMwB,QAASY,GAAS9C,EAAiB4C,EAAKC,EAAKC,IAC5CD,GAuEsBF,CAAe9B,EAAQuB,GAC1CW,EAtFGC,KACb,MAAMH,EAAM,CAAA,EAOZ,OANAG,EAAKd,QAASU,IACZA,GACEtC,OAAO2C,oBAAoBL,GAAKV,QAAS/B,GACvCH,EAAiB4C,EAAKC,EAAK1C,GAC7B,GAEG0C,GA8EgBK,CAAM,CACvBlB,EAAYZ,MACZY,EAAYV,OACZoB,EACAxB,KAAKJ,gBAcP,OAAOqC,EATS,CACdxC,SAAUO,KAAKP,UAAY,cAC3BD,MAAO8B,EACPZ,SAAUI,EAAYJ,SACtBF,WAAYM,EAAYN,WACxB0B,QAPclC,KAAKC,QAAQkC,EAAEC,SAAWpC,KAAKC,QAAQkC,EAAEC,SAAW,CAAE,GAWtDC,EAAMR,GAAAA,GACxB,CACF"}